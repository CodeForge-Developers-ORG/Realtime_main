{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/staff/Realtime_main/src/components/common/FloatingButtons.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from 'react';\r\nimport Image from 'next/image';\r\nimport Link from 'next/link';\r\n\r\nconst FloatingButtons = () => {\r\n  return (\r\n    <div className=\"hidden md:flex fixed right-8 bottom-8 z-50 flex-col gap-4\">\r\n      {/* WhatsApp Button */}\r\n      <Link \r\n        href=\"https://wa.me/918860886086\"\r\n        target=\"_blank\" \r\n        rel=\"noopener noreferrer\"\r\n        className=\"flex items-center justify-center w-18 h-18 bg-white rounded-full shadow-lg hover:scale-110 transition-transform duration-300\"\r\n        aria-label=\"Contact us on WhatsApp\"\r\n      >\r\n        <div className=\"relative w-13 h-13 flex items-center justify-center\">\r\n          <Image \r\n            src=\"/watsapp.png\" \r\n            alt=\"WhatsApp\" \r\n            height={50}\r\n            width={50}\r\n            className=\"h-full w-full object-contain\"\r\n          />\r\n        </div>\r\n      </Link>\r\n\r\n      {/* Ask RIA Button */}\r\n      {/* <Link \r\n        href=\"phone:8860886086\" \r\n        className=\"flex items-center justify-center px-7 py-3 bg-white rounded-full shadow-lg hover:scale-105 transition-transform duration-300\"\r\n        aria-label=\"Ask RIA\"\r\n      >\r\n        <div className=\"relative w-12 h-12 mr-3\">\r\n          <Image \r\n            src=\"/ria.png\" \r\n            alt=\"RIA\" \r\n            height={40}\r\n            width={40}\r\n            className=\"h-auto w-auto object-contain\"\r\n          />\r\n        </div>\r\n        <span className=\"text-orange-500 font-bold text-xl\">ASK RIA</span>\r\n      </Link> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FloatingButtons;"],"names":[],"mappings":";;;;;AAGA;AACA;AAJA;;;;AAMA,MAAM,kBAAkB;IACtB,qBACE,6LAAC;QAAI,WAAU;kBAEb,cAAA,6LAAC,0KAAI;YACH,MAAK;YACL,QAAO;YACP,KAAI;YACJ,WAAU;YACV,cAAW;sBAEX,cAAA,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,2IAAK;oBACJ,KAAI;oBACJ,KAAI;oBACJ,QAAQ;oBACR,OAAO;oBACP,WAAU;;;;;;;;;;;;;;;;;;;;;AAwBtB;KAzCM;uCA2CS","debugId":null}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///D:/staff/Realtime_main/src/services/axiosClient.ts"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst axiosClient = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_BASE_URL || \"https://app.realtimebiometrics.net/api\",\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n  withCredentials: false, // agar cookies ya auth chahiye\r\n});\r\n\r\nexport default axiosClient;\r\n"],"names":[],"mappings":";;;;AAGW;AAHX;;AAEA,MAAM,cAAc,mJAAK,CAAC,MAAM,CAAC;IAC/B,SAAS,2KAAO,CAAC,GAAG,CAAC,wBAAwB,IAAI;IACjD,SAAS;QACP,gBAAgB;IAClB;IACA,iBAAiB;AACnB;uCAEe","debugId":null}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///D:/staff/Realtime_main/src/services/constant.js"],"sourcesContent":["export const baseUri = \"https://app.realtimebiometrics.net/storage/\""],"names":[],"mappings":";;;;AAAO,MAAM,UAAU","debugId":null}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///D:/staff/Realtime_main/src/components/common/PopupModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport axiosClient from \"@/services/axiosClient\";\r\nimport { baseUri } from \"@/services/constant\";\r\nimport Image from \"next/image\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\ntype PopupData = {\r\n  title: string;\r\n  type: \"modal\";\r\n  content: string;\r\n  image?: string;\r\n  video_url?: string | null;\r\n  button_text?: string | null;\r\n  button_url?: string | null;\r\n  position: \"center\" | \"top\" | \"bottom\";\r\n  size: \"small\" | \"medium\" | \"large\";\r\n  show_after: number;\r\n  show_frequency?: \"always\" | \"once_per_day\";\r\n  styles?: Record<string, string>;\r\n};\r\n\r\nconst PopupModal = () => {\r\n  const [popup, setPopup] = useState<PopupData | null>(null);\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchPopup = async () => {\r\n      try {\r\n        const res = await axiosClient.get(\"/content/popups\");\r\n        const json = res.data;\r\n\r\n        if (json.success && json.data?.length > 0) {\r\n          const popupData = json.data[0];\r\n\r\n          // Show only once per day if configured\r\n          if (popupData.show_frequency === \"once_per_day\") {\r\n            const lastShown = localStorage.getItem(\"popupLastShown\");\r\n            const today = new Date().toDateString();\r\n            if (lastShown === today) return; // already shown today\r\n            localStorage.setItem(\"popupLastShown\", today);\r\n          }\r\n\r\n          setPopup(popupData);\r\n\r\n          const delay = (popupData.show_after || 10) * 1000;\r\n          setTimeout(() => setVisible(true), delay);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching popup:\", error);\r\n      }\r\n    };\r\n\r\n    fetchPopup();\r\n  }, []);\r\n\r\n  if (!popup || !visible) return null;\r\n\r\n  const handleClose = () => setVisible(false);\r\n\r\n  const modalSize =\r\n    popup.size === \"small\"\r\n      ? \"max-w-sm\"\r\n      : popup.size === \"medium\"\r\n      ? \"max-w-md\"\r\n      : \"max-w-2xl\";\r\n\r\n  const positionClass =\r\n    popup.position === \"top\"\r\n      ? \"items-start mt-10\"\r\n      : popup.position === \"bottom\"\r\n      ? \"items-end mb-10\"\r\n      : \"items-center\";\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[100] flex justify-center bg-black/25 bg-opacity-50 backdrop-blur-sm transition-opacity duration-300\">\r\n      <div\r\n        className={`flex ${positionClass} justify-center w-full`}\r\n        onClick={handleClose}>\r\n        <div\r\n          onClick={(e) => e.stopPropagation()}\r\n          className={`relative ${modalSize} bg-white rounded-xl shadow-lg p-6 text-center`}\r\n          style={{\r\n            backgroundColor: popup.styles?.[\"background-color\"],\r\n            color: popup.styles?.color,\r\n            borderColor: popup.styles?.[\"border-color\"],\r\n            borderRadius: popup.styles?.[\"border-radius\"],\r\n            borderWidth: popup.styles?.[\"border-color\"] ? \"1px\" : \"0px\",\r\n          }}>\r\n          {/* Close Button */}\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"absolute top-2 right-2 text-gray-500 hover:text-black\">\r\n            ✕\r\n          </button>\r\n\r\n          {/* Image */}\r\n          {popup.image && (\r\n            <div className=\"mb-4 flex justify-center\">\r\n              <Image\r\n                src={`${baseUri}${popup.image}`}\r\n                alt=\"Popup\"\r\n                className=\"rounded-md max-h-48 object-contain\"\r\n                width={300}\r\n                height={200}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {/* Title */}\r\n          <h2 className=\"text-xl font-bold mb-2\">{popup.title}</h2>\r\n\r\n          {/* Content */}\r\n          <p className=\"text-sm mb-4\">{popup.content}</p>\r\n\r\n          {/* Button */}\r\n          {popup.button_text && (\r\n            <a\r\n              href={popup.button_url || \"#\"}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              className=\"inline-block bg-orange-500 text-white px-6 py-2 rounded-md hover:bg-orange-600 transition-all\">\r\n              {popup.button_text}\r\n            </a>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PopupModal;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAsBA,MAAM,aAAa;QA6DU,eACV,gBACM,gBACC,gBACD;;IAhEvB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAmB;IACrD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;gCAAC;YACR,MAAM;mDAAa;oBACjB,IAAI;4BAIkB;wBAHpB,MAAM,MAAM,MAAM,4IAAW,CAAC,GAAG,CAAC;wBAClC,MAAM,OAAO,IAAI,IAAI;wBAErB,IAAI,KAAK,OAAO,IAAI,EAAA,aAAA,KAAK,IAAI,cAAT,iCAAA,WAAW,MAAM,IAAG,GAAG;4BACzC,MAAM,YAAY,KAAK,IAAI,CAAC,EAAE;4BAE9B,uCAAuC;4BACvC,IAAI,UAAU,cAAc,KAAK,gBAAgB;gCAC/C,MAAM,YAAY,aAAa,OAAO,CAAC;gCACvC,MAAM,QAAQ,IAAI,OAAO,YAAY;gCACrC,IAAI,cAAc,OAAO,QAAQ,sBAAsB;gCACvD,aAAa,OAAO,CAAC,kBAAkB;4BACzC;4BAEA,SAAS;4BAET,MAAM,QAAQ,CAAC,UAAU,UAAU,IAAI,EAAE,IAAI;4BAC7C;mEAAW,IAAM,WAAW;kEAAO;wBACrC;oBACF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,yBAAyB;oBACzC;gBACF;;YAEA;QACF;+BAAG,EAAE;IAEL,IAAI,CAAC,SAAS,CAAC,SAAS,OAAO;IAE/B,MAAM,cAAc,IAAM,WAAW;IAErC,MAAM,YACJ,MAAM,IAAI,KAAK,UACX,aACA,MAAM,IAAI,KAAK,WACf,aACA;IAEN,MAAM,gBACJ,MAAM,QAAQ,KAAK,QACf,sBACA,MAAM,QAAQ,KAAK,WACnB,oBACA;IAEN,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YACC,WAAW,AAAC,QAAqB,OAAd,eAAc;YACjC,SAAS;sBACT,cAAA,6LAAC;gBACC,SAAS,CAAC,IAAM,EAAE,eAAe;gBACjC,WAAW,AAAC,YAAqB,OAAV,WAAU;gBACjC,OAAO;oBACL,eAAe,GAAE,gBAAA,MAAM,MAAM,cAAZ,oCAAA,aAAc,CAAC,mBAAmB;oBACnD,KAAK,GAAE,iBAAA,MAAM,MAAM,cAAZ,qCAAA,eAAc,KAAK;oBAC1B,WAAW,GAAE,iBAAA,MAAM,MAAM,cAAZ,qCAAA,cAAc,CAAC,eAAe;oBAC3C,YAAY,GAAE,iBAAA,MAAM,MAAM,cAAZ,qCAAA,cAAc,CAAC,gBAAgB;oBAC7C,aAAa,EAAA,iBAAA,MAAM,MAAM,cAAZ,qCAAA,cAAc,CAAC,eAAe,IAAG,QAAQ;gBACxD;;kCAEA,6LAAC;wBACC,SAAS;wBACT,WAAU;kCAAwD;;;;;;oBAKnE,MAAM,KAAK,kBACV,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,2IAAK;4BACJ,KAAK,AAAC,GAAY,OAAV,yIAAO,EAAe,OAAZ,MAAM,KAAK;4BAC7B,KAAI;4BACJ,WAAU;4BACV,OAAO;4BACP,QAAQ;;;;;;;;;;;kCAMd,6LAAC;wBAAG,WAAU;kCAA0B,MAAM,KAAK;;;;;;kCAGnD,6LAAC;wBAAE,WAAU;kCAAgB,MAAM,OAAO;;;;;;oBAGzC,MAAM,WAAW,kBAChB,6LAAC;wBACC,MAAM,MAAM,UAAU,IAAI;wBAC1B,QAAO;wBACP,KAAI;wBACJ,WAAU;kCACT,MAAM,WAAW;;;;;;;;;;;;;;;;;;;;;;AAOhC;GA3GM;KAAA;uCA6GS","debugId":null}},
    {"offset": {"line": 253, "column": 0}, "map": {"version":3,"sources":["file:///D:/staff/Realtime_main/src/services/analytics.ts"],"sourcesContent":["\"use client\";\r\nimport axiosClient from \"@/services/axiosClient\";\r\n\r\n// --------------------- Types ---------------------\r\nexport type DeviceInfo = {\r\n  device_type: \"mobile\" | \"desktop\";\r\n  browser: string;\r\n  platform: string;\r\n  screen_width: number;\r\n  screen_height: number;\r\n};\r\n\r\nexport type VisitPayload = {\r\n  session_id: string;\r\n  url: string;\r\n  page_title: string;\r\n  referrer: string | null;\r\n  utm_source?: string | null;\r\n  utm_medium?: string | null;\r\n  utm_campaign?: string | null;\r\n} & DeviceInfo;\r\n\r\nexport interface VisitResponse {\r\n  success?: boolean;\r\n  message?: string;\r\n  _id?: string;\r\n  visit_id?: string;\r\n  registration_id?: string;\r\n  [key: string]: unknown;\r\n}\r\n\r\nexport type UpdateVisitPayload = {\r\n  visit_id: string;\r\n  time_on_page: number;\r\n  is_bounce: boolean;\r\n};\r\n\r\nexport type ActivityPayload = {\r\n  session_id: string;\r\n  action: string;\r\n  element: string | null;\r\n  element_id: string | null;\r\n  element_text: string | null;\r\n  page_url: string;\r\n  coordinates_x: number | null;\r\n  coordinates_y: number | null;\r\n  device_type: string;\r\n};\r\n\r\n// --------------------- Constants ---------------------\r\nconst API_BASE = `/analytics`;\r\n\r\n// --------------------- Helpers ---------------------\r\nfunction getSessionId(): string {\r\n  if (typeof window === \"undefined\") return \"server\";\r\n  let sessionId = sessionStorage.getItem(\"session_id\");\r\n  if (!sessionId) {\r\n    sessionId = \"sess_\" + Math.random().toString(36).substring(2, 12);\r\n    sessionStorage.setItem(\"session_id\", sessionId);\r\n  }\r\n  return sessionId;\r\n}\r\n\r\nfunction getDeviceInfo(): DeviceInfo {\r\n  if (typeof navigator === \"undefined\" || typeof window === \"undefined\") {\r\n    return {\r\n      device_type: \"desktop\",\r\n      browser: \"unknown\",\r\n      platform: \"unknown\",\r\n      screen_width: 0,\r\n      screen_height: 0,\r\n    };\r\n  }\r\n\r\n  return {\r\n    device_type: /Mobi|Android/i.test(navigator.userAgent)\r\n      ? \"mobile\"\r\n      : \"desktop\",\r\n    browser: navigator.userAgent,\r\n    platform: navigator.platform,\r\n    screen_width: window.innerWidth,\r\n    screen_height: window.innerHeight,\r\n  };\r\n}\r\n\r\nfunction getUTMParams(): {\r\n  utm_source?: string | null;\r\n  utm_medium?: string | null;\r\n  utm_campaign?: string | null;\r\n} {\r\n  if (typeof window === \"undefined\") return {};\r\n  const params = new URLSearchParams(window.location.search);\r\n  return {\r\n    utm_source: params.get(\"utm_source\"),\r\n    utm_medium: params.get(\"utm_medium\"),\r\n    utm_campaign: params.get(\"utm_campaign\"),\r\n  };\r\n}\r\n\r\n// --------------------- API Functions ---------------------\r\n\r\n// ✅ Record a New Visit\r\nexport async function recordVisit(): Promise<VisitResponse | null> {\r\n  try {\r\n    const session_id = getSessionId();\r\n    const device = getDeviceInfo();\r\n    const utm = getUTMParams();\r\n\r\n    const payload: VisitPayload = {\r\n      session_id,\r\n      url: window.location.href,\r\n      page_title: document.title,\r\n      referrer: document.referrer || null,\r\n      ...utm,\r\n      ...device,\r\n    };\r\n\r\n    const res = await axiosClient.post(`${API_BASE}/visits`, payload);\r\n    return (res.data?.data as VisitResponse) || (res.data as VisitResponse) || null;\r\n  } catch (err) {\r\n    console.error(\"❌ Error recording visit:\", err);\r\n    return null;\r\n  }\r\n}\r\n\r\n// ✅ Update Visit Time on Page Leave\r\nexport async function updateVisit(visit_id: string, time_on_page: number): Promise<void> {\r\n  try {\r\n    const payload: UpdateVisitPayload = {\r\n      visit_id,\r\n      time_on_page,\r\n      is_bounce: time_on_page < 5000,\r\n    };\r\n    await axiosClient.put(`${API_BASE}/visits`, payload);\r\n  } catch (err) {\r\n    console.error(\"❌ Error updating visit:\", err);\r\n  }\r\n}\r\n\r\n// ✅ Record Single Activity (Click, Scroll, etc.)\r\nexport async function recordActivity(\r\n  action: string,\r\n  element?: HTMLElement | null,\r\n  event?: MouseEvent | null\r\n): Promise<void> {\r\n  try {\r\n    const session_id = getSessionId();\r\n    const device_type = getDeviceInfo().device_type;\r\n\r\n    const payload: ActivityPayload = {\r\n      session_id,\r\n      action,\r\n      element: element?.tagName?.toLowerCase() || null,\r\n      element_id: element?.id || null,\r\n      element_text: element?.textContent?.substring(0, 100) || null,\r\n      page_url: window.location.href,\r\n      coordinates_x: event ? Math.round(event.clientX) : null,\r\n      coordinates_y: event ? Math.round(event.clientY) : null,\r\n      device_type,\r\n    };\r\n\r\n    await axiosClient.post(`${API_BASE}/activities`, payload);\r\n  } catch (err) {\r\n    console.error(\"❌ Error recording activity:\", err);\r\n  }\r\n}\r\n\r\n// ✅ Batch Multiple Activities Together\r\nconst activityQueue: ActivityPayload[] = [];\r\nlet batchTimer: ReturnType<typeof setTimeout> | null = null;\r\n\r\nexport function queueActivity(\r\n  action: string,\r\n  element?: HTMLElement | null,\r\n  event?: MouseEvent | null\r\n): void {\r\n  const session_id = getSessionId();\r\n  const device_type = getDeviceInfo().device_type;\r\n\r\n  const activity: ActivityPayload = {\r\n    session_id,\r\n    action,\r\n    element: element?.tagName?.toLowerCase() || null,\r\n    element_id: element?.id || null,\r\n    element_text: element?.textContent?.substring(0, 100) || null,\r\n    page_url: window.location.href,\r\n    coordinates_x: event ? Math.round(event.clientX) : null,\r\n    coordinates_y: event ? Math.round(event.clientY) : null,\r\n    device_type,\r\n  };\r\n\r\n  activityQueue.push(activity);\r\n\r\n  if (!batchTimer) {\r\n    batchTimer = setTimeout(sendActivityBatch, 4000); // send every 4 seconds\r\n  }\r\n}\r\n\r\nasync function sendActivityBatch(): Promise<void> {\r\n  if (activityQueue.length === 0) return;\r\n\r\n  const batchToSend = activityQueue.splice(0, 100);\r\n\r\n  try {\r\n    await axiosClient.post(`${API_BASE}/activities/batch`, {\r\n      activities: batchToSend,\r\n    });\r\n  } catch (err) {\r\n    console.error(\"❌ Error sending batch activities:\", err);\r\n  } finally {\r\n    batchTimer = null;\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 404, "column": 0}, "map": {"version":3,"sources":["file:///D:/staff/Realtime_main/src/components/layout/AnalyticsProvider.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { queueActivity, recordVisit, updateVisit } from \"@/services/analytics\";\r\nimport { useEffect } from \"react\";\r\n\r\n// Define what `recordVisit` returns\r\ninterface VisitResponse {\r\n  success?: boolean;\r\n  message?: string;\r\n  _id?: string;\r\n  visit_id?: string;\r\n  [key: string]: unknown; // allow any extra API fields\r\n}\r\n\r\nexport default function AnalyticsProvider(): null {\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n\r\n    let visitId: string | null = null;\r\n    const startTime = Date.now();\r\n\r\n    // ✅ 1. Record a visit when page loads\r\n    recordVisit()\r\n      .then((res: VisitResponse | null) => {\r\n        if (!res) return;\r\n        visitId = res._id ?? res.visit_id ?? null;\r\n      })\r\n      .catch((err: unknown) => {\r\n        console.error(\"Error recording visit:\", err);\r\n      });\r\n\r\n    // ✅ 2. Update time spent on page before leaving\r\n    const handleUnload = () => {\r\n      if (!visitId) return;\r\n      const timeOnPage = Date.now() - startTime;\r\n      updateVisit(visitId, timeOnPage).catch((err: unknown) =>\r\n        console.error(\"Error updating visit:\", err)\r\n      );\r\n    };\r\n    window.addEventListener(\"beforeunload\", handleUnload);\r\n\r\n    // ✅ 3. Track clicks (batched every 4 seconds)\r\n    const handleClick = (e: MouseEvent) => {\r\n      const el = e.target as HTMLElement | null;\r\n      if (el) queueActivity(\"click\", el);\r\n    };\r\n    window.addEventListener(\"click\", handleClick);\r\n\r\n    // ✅ 4. Track scroll activity (batched every 4 seconds)\r\n    const handleScroll = () => {\r\n      queueActivity(\"scroll\", document.body);\r\n    };\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n\r\n    // ✅ Cleanup listeners\r\n    return () => {\r\n      window.removeEventListener(\"beforeunload\", handleUnload);\r\n      window.removeEventListener(\"click\", handleClick);\r\n      window.removeEventListener(\"scroll\", handleScroll);\r\n    };\r\n  }, []);\r\n\r\n  return null;\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;;AAHA;;;AAce,SAAS;;IACtB,IAAA,0KAAS;uCAAC;YACR;;YAEA,IAAI,UAAyB;YAC7B,MAAM,YAAY,KAAK,GAAG;YAE1B,sCAAsC;YACtC,IAAA,8IAAW,IACR,IAAI;+CAAC,CAAC;oBACL,IAAI,CAAC,KAAK;wBACA,UAAA;oBAAV,UAAU,CAAA,OAAA,CAAA,WAAA,IAAI,GAAG,cAAP,sBAAA,WAAW,IAAI,QAAQ,cAAvB,kBAAA,OAA2B;gBACvC;8CACC,KAAK;+CAAC,CAAC;oBACN,QAAQ,KAAK,CAAC,0BAA0B;gBAC1C;;YAEF,gDAAgD;YAChD,MAAM;4DAAe;oBACnB,IAAI,CAAC,SAAS;oBACd,MAAM,aAAa,KAAK,GAAG,KAAK;oBAChC,IAAA,8IAAW,EAAC,SAAS,YAAY,KAAK;oEAAC,CAAC,MACtC,QAAQ,KAAK,CAAC,yBAAyB;;gBAE3C;;YACA,OAAO,gBAAgB,CAAC,gBAAgB;YAExC,8CAA8C;YAC9C,MAAM;2DAAc,CAAC;oBACnB,MAAM,KAAK,EAAE,MAAM;oBACnB,IAAI,IAAI,IAAA,gJAAa,EAAC,SAAS;gBACjC;;YACA,OAAO,gBAAgB,CAAC,SAAS;YAEjC,uDAAuD;YACvD,MAAM;4DAAe;oBACnB,IAAA,gJAAa,EAAC,UAAU,SAAS,IAAI;gBACvC;;YACA,OAAO,gBAAgB,CAAC,UAAU;YAElC,sBAAsB;YACtB;+CAAO;oBACL,OAAO,mBAAmB,CAAC,gBAAgB;oBAC3C,OAAO,mBAAmB,CAAC,SAAS;oBACpC,OAAO,mBAAmB,CAAC,UAAU;gBACvC;;QACF;sCAAG,EAAE;IAEL,OAAO;AACT;GAjDwB;KAAA","debugId":null}}]
}